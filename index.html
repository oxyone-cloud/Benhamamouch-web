<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Chambre Froide v2</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #050505; font-family: 'Segoe UI', sans-serif; }
        #gui {
            position: absolute; top: 20px; right: 20px;
            width: 250px; background: rgba(0, 0, 0, 0.8);
            color: white; padding: 20px; border-radius: 10px;
            border: 1px solid #444; box-shadow: 0 0 15px rgba(0,170,255,0.3); z-index: 10;
        }
        .stat { margin-bottom: 15px; }
        .label { font-size: 12px; color: #aaa; text-transform: uppercase; }
        .value { font-size: 24px; font-weight: bold; color: #00aaff; }
        input[type=range] { width: 100%; margin-top: 10px; cursor: pointer; }
        .alert { color: #ff4444 !important; }
    </style>
</head>
<body>
    <div id="gui">
        <div class="stat">
            <div class="label">Température Actuelle</div>
            <div id="tempDisplay" class="value">4.0°C</div>
            <input type="range" id="tempSlider" min="-25" max="15" value="4" step="0.5">
        </div>
        <div class="stat">
            <div class="label">État du Système</div>
            <div id="statusDisplay" class="value" style="font-size: 16px; color: #00ff88;">NORMAL</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        camera.position.set(8, 6, 10);

        const ambientLight = new THREE.AmbientLight(0x404040, 2); 
        scene.add(ambientLight);
        const light = new THREE.PointLight(0xffffff, 1.5); 
        light.position.set(5, 10, 5); 
        scene.add(light);

        const grid = new THREE.GridHelper(20, 20, 0x333333, 0x222222); 
        scene.add(grid);

        // LA CHAMBRE FROIDE
        const geometry = new THREE.BoxGeometry(6, 4, 8);
        const material = new THREE.MeshStandardMaterial({ 
            color: 0xcccccc, 
            metalness: 0.8, 
            roughness: 0.2, 
            transparent: true, 
            opacity: 0.7, 
            side: THREE.DoubleSide 
        });
        const mesh = new THREE.Mesh(geometry, material); 
        mesh.position.y = 2; 
        scene.add(mesh);

        const edges = new THREE.EdgesGeometry(geometry);
        const lineMat = new THREE.LineBasicMaterial({ color: 0x00aaff, linewidth: 2 });
        const lines = new THREE.LineSegments(edges, lineMat); 
        lines.position.y = 2; 
        scene.add(lines);

        // INTERACTION
        const slider = document.getElementById('tempSlider');
        const tempDisplay = document.getElementById('tempDisplay');
        const statusDisplay = document.getElementById('statusDisplay');

        slider.addEventListener('input', (e) => {
            const temp = parseFloat(e.target.value);
            tempDisplay.innerText = temp.toFixed(1) + "°C";
            if (temp > 7) {
                lineMat.color.setHex(0xff4444);
                tempDisplay.className = "value alert";
                statusDisplay.innerText = "ALERTE : TEMP. ÉLEVÉE";
                statusDisplay.style.color = "#ff4444";
            } else {
                lineMat.color.setHex(0x00aaff);
                tempDisplay.className = "value";
                statusDisplay.innerText = "NORMAL";
                statusDisplay.style.color = "#00ff88";
            }
        });

        function animate() { 
            requestAnimationFrame(animate); 
            controls.update(); 
            renderer.render(scene, camera); 
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
