<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Chambre Froide Interactive</title>
    <style>
        body { margin: 0; overflow: hidden; background: #050505; font-family: sans-serif; }
        #ui {
            position: absolute; top: 20px; left: 20px;
            background: rgba(0,0,0,0.8); color: white;
            padding: 20px; border-radius: 10px; border: 1px solid #00aaff;
            z-index: 100; width: 220px;
        }
        .temp-display { font-size: 32px; font-weight: bold; color: #00aaff; margin: 10px 0; }
        input[type=range] { width: 100%; cursor: pointer; }
        .alert { color: #ff4444 !important; }
    </style>
</head>
<body>

    <div id="ui">
        <div style="font-size: 12px; color: #aaa;">CONTROLE TEMPÉRATURE</div>
        <div id="tempVal" class="temp-display">4.0°C</div>
        <input type="range" id="slider" min="-20" max="15" value="4" step="0.5">
        <div id="status" style="color: #00ff88; font-weight: bold; margin-top: 5px;">SYSTÈME OK</div>
        <p style="font-size: 11px; color: #666; margin-top: 15px;">Souris : Pivoter / Zoomer</p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        camera.position.set(10, 8, 12);

        scene.add(new THREE.AmbientLight(0xffffff, 0.6));
        scene.add(new THREE.GridHelper(20, 20, 0x444444, 0x222222));

        // Création de la boîte (Chambre Froide)
        const geometry = new THREE.BoxGeometry(8, 5, 10);
        const lineMat = new THREE.LineBasicMaterial({ color: 0x00aaff, linewidth: 2 });
        const wireframe = new THREE.LineSegments(new THREE.EdgesGeometry(geometry), lineMat);
        wireframe.position.y = 2.5;
        scene.add(wireframe);

        // Liaison avec le panneau de contrôle
        const slider = document.getElementById('slider');
        const tempVal = document.getElementById('tempVal');
        const status = document.getElementById('status');

        slider.addEventListener('input', (e) => {
            const val = parseFloat(e.target.value);
            tempVal.innerText = val.toFixed(1) + "°C";
            
            if (val > 7) {
                // Alerte
                lineMat.color.setHex(0xff4444);
                tempVal.classList.add('alert');
                status.innerText = "ALERTE : TEMP. ÉLEVÉE";
                status.style.color = "#ff4444";
            } else {
                // Normal
                lineMat.color.setHex(0x00aaff);
                tempVal.classList.remove('alert');
                status.innerText = "SYSTÈME OK";
                status.style.color = "#00ff88";
            }
        });

        function animate() { requestAnimationFrame(animate); controls.update(); renderer.render(scene, camera); }
        animate();
    </script>
</body>
</html>
